{% extends "index.html" %}
{% load static %}
{% block content %}

<div class="phone-reset-widget">
<div class="pr-card">
<h2 class="pr-title">Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„</h2>
<p class="pr-sub">Ø´Ù…Ø§Ø±Ù‡â€ŒØª Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†Ø› Ø§Ú¯Ù‡ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ù‡ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯ Ø¨Ø°Ø§Ø±ÛŒ.</p>

{% if messages %}
<div class="pr-messages">
{% for msg in messages %}
<div class="pr-msg {{ msg.tags }}">{{ msg }}</div>
{% endfor %}
</div>
{% endif %}

<form method="post" class="pr-form" novalidate>
{% csrf_token %}
<label class="pr-label">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„</label>
<input class="pr-input" type="text" name="phone_number" placeholder="09xx xxx xxxx" required>

<label class="pr-label">Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯</label>
<div class="pr-pass-row">
<input class="pr-input pr-pass" type="password" name="new_password" placeholder="Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯" required>
<button type="button" class="pr-toggle" aria-label="Ù†Ù…Ø§ÛŒØ´/Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ø±Ù…Ø²">ğŸ‘</button>
</div>

<label class="pr-label">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯</label>
<input class="pr-input" type="password" name="confirm_password" placeholder="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯" required>

<button class="pr-btn" type="submit">ØªØºÛŒÛŒØ± Ø±Ù…Ø²</button>
</form>

<p class="pr-note">
<a href="{% url 'user_login' %}">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯</a>
</p>
</div>
</div>

<style>
/* Ù‡Ù…Ù‡ Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ ÙÙ‚Ø· Ø¯Ø± Ø¯Ø§Ø®Ù„ .phone-reset-widget Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ */
.phone-reset-widget {
display: flex;
justify-content: center;
padding: 140px 16px;
box-sizing: border-box;
}

/* Ú©Ø§Ø±Øª Ø³ÙÛŒØ¯ Ø¨Ø§ Ø³Ø§ÛŒÙ‡ Ù…Ù„Ø§ÛŒÙ… */
.pr-card {
width: 100%;
max-width: 460px;
background: #ffffff;
border-radius: 12px;
box-shadow: 0 6px 18px rgba(18, 38, 63, 0.08);
padding: 28px;
box-sizing: border-box;
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* Ø¹Ù†ÙˆØ§Ù† Ùˆ ØªÙˆØ¶ÛŒØ­ */
.pr-title {
margin: 0 0 8px 0;
font-size: 20px;
color: #12263f;
font-weight: 600;
text-align: center;
}
.pr-sub {
margin: 0 0 18px 0;
font-size: 13px;
color: #6b7280;
text-align: center;
}

/* Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ */
.pr-messages { margin-bottom: 12px; }
.pr-msg {
padding: 8px 10px;
border-radius: 8px;
font-size: 13px;
margin-bottom: 8px;
}
.pr-msg.error, .pr-msg.error strong { background: #fff1f0; color: #b91c1c; }
.pr-msg.success { background: #f0fdf4; color: #065f46; }

/* ÙØ±Ù… */
.pr-form { display: grid; gap: 12px; }
.pr-label { font-size: 13px; color: #374151; margin-bottom: 6px; display: block; }
.pr-input {
width: 100%;
padding: 10px 12px;
border: 1px solid #e6e9ee;
border-radius: 8px;
font-size: 14px;
box-sizing: border-box;
outline: none;
}
.pr-input:focus { border-color:rgb(237, 94, 58); box-shadow: 0 0 0 4px rgba(124,58,237,0.06); }

/* Ø³Ø·Ø± Ù¾Ø³ÙˆØ±Ø¯ Ø¨Ø§ Ø¯Ú©Ù…Ù‡ Ù†Ù…Ø§ÛŒØ´ */
.pr-pass-row { display:flex; gap:8px; align-items:center; }
.pr-pass { flex:1; }
.pr-toggle {
background: #f3f4f6;
border: 1px solid #e6e9ee;
border-radius: 8px;
padding: 8px 10px;
cursor: pointer;
font-size: 14px;
line-height: 1;
}
.pr-toggle:active { transform: translateY(1px); }

/* Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ */
.pr-btn {
margin-top: 6px;
width: 100%;
padding: 10px 14px;
background: linear-gradient(90deg,#5b21b6,#7c3aed);
color: #fff;
border: none;
border-radius: 10px;
font-size: 15px;
cursor: pointer;
}
.pr-btn:hover { opacity: 0.95; }

/* Ù„ÛŒÙ†Ú© Ùˆ Ù†ÙˆØª */
.pr-note {
margin-top: 12px;
text-align: center;
font-size: 13px;
color:#6b7280;
}
.pr-note a { color:#4f46e5; text-decoration:none; }
.pr-note a:hover { text-decoration:underline; }

/* ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ±ÛŒ */
@media (max-width:480px){
.pr-card { padding: 20px; border-radius:10px; }
.pr-title { font-size:18px; }
}
</style>

<script>
/* Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ú©ÙˆÚ†Ú© Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´/Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ø±Ù…Ø²Ø› Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù‡Ù… ÙÙ‚Ø· Ø¯Ø± Ø§ÛŒÙ† ØªÙ…Ù¾Ù„ÛŒØª Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯ */
(function(){
const widget = document.querySelector('.phone-reset-widget');
if (!widget) return;

const toggle = widget.querySelector('.pr-toggle');
const pass = widget.querySelector('.pr-pass');

if (toggle && pass) {
toggle.addEventListener('click', function(){
if (pass.type === 'password') {
pass.type = 'text';
toggle.textContent = 'ğŸ™ˆ';
} else {
pass.type = 'password';
toggle.textContent = 'ğŸ‘';
}
});
}
})();
</script>

{% endblock %}